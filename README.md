# 这个项目是关于一个3自由度直升机的控制系统设计

## 整个项目分为四个阶段：
1. 测量系统参数并标定电机产生的推力与电压之间的关系
2. 根据测量的各种参数对系统进行数学建模，得到系统的数学表达式
3. 针对该模型设计控制器＋观测器，在Matlab中进行仿真
4. 调参，对控制系统的效果进行优化，并连接到硬件上进行测试


## 对象简介：
该直升机由两个旋翼驱动，通过调整两个旋翼的电机电压（限压正负4V）来改变推力，实现在raw, yaw, pitch 三个方向上的旋转


## 参数测量
1. 测量各部件的质量，长度等参数，作为建模的基础
2. 根据三个方向的转矩方程建立出系统的数学模型
3. 根据电机的电压以及测量得到的推力得到一组对应关系，然后用多项式拟合得到推力与电压的关系式


## 建立数学模型
1. 根据建立的非线性模型在静点附近线性化得到线性模型， 用于LQR + Luenberger方案
2. 将此连续模型离散化（零阶保持法ZOH）得到的模型用于MPC设计
3. 先将非线性模型离散化（龙格库塔法），然后每个循环期间对当前的状态线性化得到的线性离散模型用于卡尔曼滤波器


## 规划参考轨迹
需要规划三个角度alpha, beta, gamma的参考轨迹，由于gamma不在整个飞行要求范围内，所以将gamma设为0。
alpha 和 beta 的参考轨迹由多段的多项式和常数组成，这里的多项式选用5次多项式拟合得来，边界条件根据要求设定


## 控制算法：
### LQI + Luenberger 观测器
1. 连续控制器，根据黎卡提方程求得的控制输入，叠加前馈控制和积分环节I得到的完整的控制律，这里的控制律是力Ff, Fb, 由于力是通过电机电压控制的，所以我们只能根据之前得到的推力-电压公式将其转换成电压，设定上下限，然后根据接口传递到硬件设备中达到控制目的， 与此同时将设置上下限之后的电压转换成推力，然后输入至观测器。
2. 值得一提的是，由于设置电压的上下限，可能会出现积分饱和现象，所以在系统中加了抗饱和积分环节用来消除此问题。
3. 调节LQR的的参数Q和R， 并且配置合理的观测器中矩阵L的极点。

### MPC + 卡尔曼滤波器
1. 


## 